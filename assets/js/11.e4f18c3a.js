(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{273:function(t,s){t.exports="data:image/png;base64,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"},301:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("对任何项目来说，读懂源码应该都是最透彻的学习方式。只是很多项目的代码量实在太多，又或者是阅读的难度太高，所以一般不会采用这种方式学习。不过redux是一个例外，它本身的代码极少，去掉注释和空行的话只有100多行，而且实现的方式也很简洁，十分适合进行阅读。")]),t._v(" "),n("p",[t._v("然而，既然redux只有100多行——相信大家平时写100多行代码都是分分钟的事，那么，有什么理由不自己手动实现一次呢？何况这100多行代码里还有很大一部分用于类型校验，我们只是为了学习，所以类型校验也可以去掉，只保留最基本的核心功能，这样剩下的代码就更少了。")]),t._v(" "),n("p",[t._v("接下来，就请和我一起动手实现一个简单的redux吧，如果你之前没有做过类似的事，相信你会从中收获不少。")]),t._v(" "),n("h2",{attrs:{id:"createstore"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#createstore"}},[t._v("#")]),t._v(" createStore")]),t._v(" "),n("p",[t._v("调用createStore方法是使用redux的第一步，它接收三个参数：reducers、initState、enhancer，并返回一个store对象。Store对象有三个主要作用:")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("用dispatch发出action；")])]),t._v(" "),n("li",[n("p",[t._v("用getState获得当前的state树；")])]),t._v(" "),n("li",[n("p",[t._v("用subscribe监听store变化。")])])]),t._v(" "),n("p",[t._v("由此可见，createStore方法的返回值，即是包含了上述三个函数的store对象。")]),t._v(" "),n("hr"),t._v(" "),n("p",[t._v("接下来再看看createStore中的成员变量。Redux中有三个核心的成员变量：")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("currentReducer，用于存放reducer；")])]),t._v(" "),n("li",[n("p",[t._v("currentState，保存当前的state树；")])]),t._v(" "),n("li",[n("p",[t._v("currentListener，一个数组，存放了当前所有的listener;")])])]),t._v(" "),n("p",[t._v("根据以上信息，我们可以推断出一个简单的redux结构是这样的。")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("reducer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("initState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("enhancer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" currentReducer"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("reducer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" currentState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("initState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" currentListener"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  dispatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  getState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  subscribe\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br")])]),n("h3",{attrs:{id:"getstate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#getstate"}},[t._v("#")]),t._v(" getState")]),t._v(" "),n("p",[t._v("getState用于获取当前的state树，由于我们已经有一个currentState变量用于保存当前state，所以直接将currentState这个变量直接返回就好（原本的redux也是这么简单粗暴）。")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" currentState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("h3",{attrs:{id:"subscribe"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#subscribe"}},[t._v("#")]),t._v(" subscribe")]),t._v(" "),n("p",[t._v("subscribe的实现也很简单，它接收一个function，然后将该function存入currentListener数组。当state产生变化的时候，遍历该数组并调用保存在其中的function，就达到了监听store化的效果。subscribe还有一个返回值unsubscribe，用于退订store监听。所谓退订，其实只要把对应的function在数组中移除就可以了。subscribe实现如下：")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("listener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        currentListener"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("listener"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsubscribe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" index"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("currentListener"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("listener"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            currentListener"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("splice")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("h3",{attrs:{id:"dispatch"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dispatch"}},[t._v("#")]),t._v(" dispatch")]),t._v(" "),n("p",[t._v("dispatch接收一个action参数，并在其中做了两件事：")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("生成新的state树；")])]),t._v(" "),n("li",[n("p",[t._v("调用所有listener；")])])]),t._v(" "),n("p",[t._v("新的state树并不是由redux生成，而是由外部的reducer函数负责处理的。所以直接把action传入reducer里面并接收它的返回值就好。")]),t._v(" "),n("p",[t._v("至于调用listener，只要遍历currentListener数组就可以了。具体实现如下：")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//调用currentReducer方法，生成新的state数")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//并把新生成的state树赋值给currentState")]),t._v("\n    currentState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentReducer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//遍历currentListener数组，依次调用保存在其中的listener")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("currentListener"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" listener"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("currentListener"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])]),n("p",[t._v("至此，一个简单的createStore就被我们实现了。虽然看似很简单，但是在核心功能的实现上，跟原本的redux是一模一样的，只是少了一些数据类型的检测。我们可以写一个例子验证一下。")]),t._v(" "),n("h2",{attrs:{id:"计时器验证redux的状态管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#计时器验证redux的状态管理"}},[t._v("#")]),t._v(" 计时器验证redux的状态管理")]),t._v(" "),n("p",[t._v("首先进行redux配置，创建一个名为storeConfig.js的文件，写入如下内容：")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("createStore"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myRedux'")]),t._v("\n \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" initState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("number"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("reducer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'add'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("number"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("number"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'minus'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("number"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("number"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reducer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("initState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br")])]),n("p",[t._v("然后创建一个名为Counter.js的文件，写入如下内容：")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("useState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("useEffect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("View"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Button"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-native'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" store "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./storeConfig'")]),t._v("\n \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Counter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("num"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("setNum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" unsubsrcibe"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("number"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsubsrcibe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("View style"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("container"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'当前的数字为：'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("num"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Button title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'+'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" onPress"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("add"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Button title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" onPress"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("minus"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("View"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'add'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("minus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'minus'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" container"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    flex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    alignItems"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'center'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    justifyContent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'center'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" Counter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br")])]),n("p",[t._v("最后的界面大概是这个样子：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(273),alt:"图片无法显示，请检查网络"}})]),t._v(" "),n("p",[t._v("经过测试，我们的redux运行良好。")]),t._v(" "),n("p",[t._v("然而我们只实现了redux的状态管理功能，但是中间件功能呢？还有createStore的第三个enhancer是拿来干什么的？这些东西让我们下一节再继续讨论。")])])}),[],!1,null,null,null);s.default=e.exports}}]);